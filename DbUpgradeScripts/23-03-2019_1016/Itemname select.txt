
drop table [MItemNameDisplayType]
GO
/****** Object:  Table [dbo].[MItemNameDisplayType]    Script Date: 4/1/2019 1:05:45 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[MItemNameDisplayType](
	[ItemNameTypeNo] [numeric](18, 0) IDENTITY(1,1) NOT NULL,
	[ItemNameType] [varchar](max) NULL,
	[Query1] [varchar](max) NULL,
	[Query2] [varchar](max) NULL,
	[Query3] [varchar](max) NULL,
	[StartIndex] [int] NULL,
	[Param1Value] [varchar](max) NULL,
	[Param2Value] [varchar](max) NULL,
	[PartyQuery] [varchar](max) NULL,
	[UserID] [numeric](18, 0) NULL,
	[UserDate] [datetime] NULL,
 CONSTRAINT [PK_ItemNameTypeDisplay] PRIMARY KEY CLUSTERED 
(
	[ItemNameTypeNo] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO
SET ANSI_PADDING OFF
GO
SET IDENTITY_INSERT [dbo].[MItemNameDisplayType] ON 

INSERT [dbo].[MItemNameDisplayType] ([ItemNameTypeNo], [ItemNameType], [Query1], [Query2], [Query3], [StartIndex], [Param1Value], [Param2Value], [PartyQuery], [UserID], [UserDate]) VALUES (CAST(1 AS Numeric(18, 0)), N'Item Desc', NULL, NULL, N'SELECT MStockItems.ItemNo,Case When(MStockItems.ItemShortCode<>'''') then MStockItems.ItemShortCode  else MStockItems.ItemName end AS ItemName, MRateSetting.@cmbRateType@ AS SaleRate, MUOM.UOMName, MRateSetting.MRP,  (SELECT  ISNULL(SUM(CASE WHEN trncode = 1 THEN quantity ELSE - quantity END), 0)  +  ISNULL(SUM(CASE WHEN trncode = 1 THEN FreeQty ELSE - FreeQty END), 0)  FROM TStock INNER JOIN TStockGodown ON TSTock.PKStockTrnNo=TStockGodown.FKStockTrnNo  WHERE TStockGodown.GodownNo=2 AND  (TStock.FkRateSettingNo = Mratesetting.pksrno) and Tstock.Itemno=MStockItems.itemno ) AS Stock, '''' AS stkUOM, 0 AS SaleTax, 0 AS PurTax,  MStockItems.CompanyNo, MStockBarcode.Barcode, MRateSetting.PkSrNo As RateSettingNo, MStockItems.UOMDefault,MRateSetting.PurRate  FROM MStockItems INNER JOIN  dbo.GetItemRateAll(NULL, NULL, NULL, NULL, NULL, NULL) AS MRateSetting ON MStockItems.ItemNo = MRateSetting.ItemNo AND   MStockItems.UOMDefault = MRateSetting.UOMNo INNER JOIN  MStockBarcode ON MRateSetting.FkBcdSrNo = MStockBarcode.PkStockBarcodeNo INNER JOIN  MUOM ON MStockItems.UOMDefault = MUOM.UOMNo Where MStockItems.ItemNo <> 1 And MStockItems.IsActive=''true''  AND MStockItems.CompanyNo=@CompNo@  ORDER BY ItemName', 1, NULL, NULL, N'SELECT MLedger.LedgerNo, MLedger.LedgerName AS LedgerName FROM MLedger WHERE (MLedger.GroupNo IN (@GroupNo)) AND (MLedger.IsActive = ''true'') ORDER BY LedgerName', CAST(1 AS Numeric(18, 0)), NULL)
INSERT [dbo].[MItemNameDisplayType] ([ItemNameTypeNo], [ItemNameType], [Query1], [Query2], [Query3], [StartIndex], [Param1Value], [Param2Value], [PartyQuery], [UserID], [UserDate]) VALUES (CAST(2 AS Numeric(18, 0)), N'Brand Name+ Item Desc(Only For Yadi)', NULL, N'Select ItemGroupNo,ItemGroupName From MItemGroup Where  ItemGroupNo in (select  groupno from mitemmaster where itemno in (select itemno from MItemTaxInfo where FromDate<=''@FromDate'' )and esflag=''false''  AND MItemMaster.CompanyNo=@CompNo@) and IsActive=''true'' order by ItemGroupName', N'SELECT MItemMaster.ItemNo,MItemMaster.ItemName AS ItemName, MRateSetting.@cmbRateType@ AS SaleRate, MUOM.UOMName, MRateSetting.MRP,MRateSetting.stock  AS Stock, (select uomname from mitemmaster inner join muom on MItemMaster.uoml=muom.uomno where MItemMaster.itemno=MRateSetting.itemno ) AS stkUOM, 0 AS SaleTax, 0 AS PurTax,  MItemMaster.CompanyNo, MItemMaster.Barcode,  MRateSetting.PkSrNo As RateSettingNo, MItemMaster.UOMDefault,MRateSetting.PurRate,0 As DiscPerce,MItemMaster.ShortCode ,MItemMaster.esflag ,MRateSetting.stock2  AS EsStock FROM  MItemMaster INNER JOIN MUOM ON MItemMaster.UOMDefault = MUOM.UOMNo  LEFT OUTER JOIN dbo.GetItemRateAll(NULL, NULL, NULL, NULL,null) AS MRateSetting  ON  MItemMaster.ItemNo = MRateSetting.ItemNo AND MItemMaster.UOMDefault = MRateSetting.UOMNo WHERE     (MItemMaster.ItemNo <> 1) AND (MItemMaster.IsActive = ''true'') AND (MItemMaster.GroupNo = @Param1@)  ORDER BY MItemMaster.ItemName ', 1, N'GroupNo', NULL, N'SELECT MLedger.LedgerNo, MLedger.LedgerName AS LedgerName FROM MLedger WHERE (MLedger.GroupNo IN (@GroupNo)) AND (MLedger.IsActive = ''true'') ORDER BY LedgerName', CAST(1 AS Numeric(18, 0)), NULL)
INSERT [dbo].[MItemNameDisplayType] ([ItemNameTypeNo], [ItemNameType], [Query1], [Query2], [Query3], [StartIndex], [Param1Value], [Param2Value], [PartyQuery], [UserID], [UserDate]) VALUES (CAST(3 AS Numeric(18, 0)), N'Brand Name+ Product', N'Select ItemGroupNo,ItemGroupName From MItemGroup Where ItemGroupNo in (select FkDepartmentNo from mitemmaster where itemno in (select itemno from MItemTaxInfo where FromDate<=''@FromDate'' )and esflag=''false'' AND MItemMaster.CompanyNo=@CompNo@) and IsActive=''true'' order by ItemGroupName', N'Select ItemGroupNo,ItemGroupName from MItemGroup where ItemGroupNo in (select Distinct FkCategoryNo from mitemmaster WHERE mitemmaster.IsActive=''true'' and FkDepartmentNo=@Param2@) order by ItemGroupName', N'SELECT MItemMaster.ItemNo,MItemGroup.ItemGroupName + '' - '' +MItemMaster.ItemName AS ItemName,MRateSetting.@cmbRateType@ AS SaleRate,MUOM.UOMName,MRateSetting.MRP,case when MItemMaster.esflag=''false'' then MRateSetting.stock else MRateSetting.stock2 end AS Stock,(select uomname from mitemmaster inner join muom on MItemMaster.uoml=muom.uomno where MItemMaster.itemno=MRateSetting.itemno ) AS stkUOM,0 AS SaleTax,0 AS PurTax,MItemMaster.CompanyNo,MItemMaster.Barcode,MRateSetting.PkSrNo As RateSettingNo,MItemMaster.UOMDefault,MRateSetting.PurRate,0 As DiscPerce,MItemMaster.ShortCode ,MItemMaster.esflag ,MRateSetting.stock2 AS EsStock FROM MItemMaster INNER JOIN MUOM ON MItemMaster.UOMDefault = MUOM.UOMNo inner join MItemGroup on MItemGroup.ItemGroupNo=MItemMaster.groupno LEFT OUTER JOIN dbo.GetItemRateAll(NULL,NULL,NULL,NULL,null) AS MRateSetting ON MItemMaster.ItemNo = MRateSetting.ItemNo AND MItemMaster.UOMDefault = MRateSetting.UOMNo WHERE (MItemMaster.ItemNo <> 1) AND (MItemMaster.IsActive = ''true'') AND (MItemMaster.FkCategoryNo = @Param1@) AND (MItemMaster.FkDepartmentNo = @Param2@) ORDER BY MItemGroup.ItemGroupName,MItemMaster.ItemName', 1, N'GroupNo1', NULL, N'SELECT MLedger.LedgerNo, MLedger.LedgerName AS LedgerName FROM MLedger WHERE (MLedger.GroupNo IN (@GroupNo)) AND (MLedger.IsActive = ''true'') ORDER BY LedgerName', CAST(1 AS Numeric(18, 0)), NULL)
INSERT [dbo].[MItemNameDisplayType] ([ItemNameTypeNo], [ItemNameType], [Query1], [Query2], [Query3], [StartIndex], [Param1Value], [Param2Value], [PartyQuery], [UserID], [UserDate]) VALUES (CAST(4 AS Numeric(18, 0)), N'Product + Brand Name', N'Select ItemGroupNo,ItemGroupName From MItemGroup Where ItemGroupNo in (select Distinct FkCategoryNo from mitemmaster WHERE mitemmaster.ItemNo<>1 AND mitemmaster.CompanyNo=@CompNo@) order by ItemGroupName', N'Select ItemGroupNo,ItemGroupName from MItemGroup where ItemGroupNo in (select Distinct FkDepartmentNo from mitemmaster WHERE mitemmaster.IsActive=''true'' and FkCategoryNo=@Param2@) order by ItemGroupName', N'SELECT MItemMaster.ItemNo,MItemGroup.ItemGroupName + '' - '' +MItemMaster.ItemName AS ItemName, MRateSetting.@cmbRateType@ AS SaleRate, MUOM.UOMName, MRateSetting.MRP,case when MItemMaster.esflag=''false'' then MRateSetting.stock else MRateSetting.stock2 end AS Stock, (select uomname from mitemmaster inner join muom on MItemMaster.uoml=muom.uomno where MItemMaster.itemno=MRateSetting.itemno ) AS stkUOM, 0 AS SaleTax, 0 AS PurTax,  MItemMaster.CompanyNo, MItemMaster.Barcode,  MRateSetting.PkSrNo As RateSettingNo, MItemMaster.UOMDefault,MRateSetting.PurRate,0 As DiscPerce,MItemMaster.ShortCode ,MItemMaster.esflag ,MRateSetting.stock2  AS EsStock  FROM  MItemMaster INNER JOIN MUOM ON MItemMaster.UOMDefault = MUOM.UOMNo inner join MItemGroup on MItemGroup.ItemGroupNo=MItemMaster.groupno  LEFT OUTER JOIN dbo.GetItemRateAll(NULL, NULL, NULL, NULL,null) AS MRateSetting  ON  MItemMaster.ItemNo = MRateSetting.ItemNo AND MItemMaster.UOMDefault = MRateSetting.UOMNo WHERE     (MItemMaster.ItemNo <> 1) AND (MItemMaster.IsActive = ''true'') AND (MItemMaster.FkCategoryNo = @Param2@)  AND (MItemMaster.FkDepartmentNo = @Param1@) ORDER BY MItemGroup.ItemGroupName,MItemMaster.ItemName', 1, N'GroupNo1', N'GroupNo', N'SELECT MLedger.LedgerNo, MLedger.LedgerName AS LedgerName FROM MLedger WHERE (MLedger.GroupNo IN (@GroupNo)) AND (MLedger.IsActive = ''true'') ORDER BY LedgerName', CAST(1 AS Numeric(18, 0)), NULL)
INSERT [dbo].[MItemNameDisplayType] ([ItemNameTypeNo], [ItemNameType], [Query1], [Query2], [Query3], [StartIndex], [Param1Value], [Param2Value], [PartyQuery], [UserID], [UserDate]) VALUES (CAST(5 AS Numeric(18, 0)), N'Brand Name + Vehicle', N'Select ItemGroupNo,ItemGroupName From MItemGroup Where ItemGroupNo in (select FkDepartmentNo from mitemmaster where itemno in (select itemno from MItemTaxInfo where FromDate<=''@FromDate'' )and esflag=''false'' AND MItemMaster.CompanyNo=@CompNo@) and IsActive=''true'' order by ItemGroupName', N'Select ItemGroupNo,ItemGroupName from MItemGroup  where ItemGroupNo in (select Distinct GroupNo from MItemMaster  where FkDepartmentNo=@Param2@ AND MItemMaster.CompanyNo=@CompNo@)  and IsActive=''true'' order by ItemGroupName', N'SELECT MItemMaster.ItemNo,MItemGroup.ItemGroupName + '' - '' +MItemMaster.ItemName AS ItemName, MRateSetting.@cmbRateType@ AS SaleRate, MUOM.UOMName, MRateSetting.MRP,MRateSetting.stock  AS Stock, (select uomname from mitemmaster inner join muom on MItemMaster.uoml=muom.uomno where MItemMaster.itemno=MRateSetting.itemno ) AS stkUOM, 0 AS SaleTax, 0 AS PurTax,  MItemMaster.CompanyNo, MItemMaster.Barcode,  MRateSetting.PkSrNo As RateSettingNo, MItemMaster.UOMDefault,MRateSetting.PurRate,0 As DiscPerce,MItemMaster.ShortCode ,MItemMaster.esflag ,MRateSetting.stock2  AS EsStock FROM  MItemMaster INNER JOIN MUOM ON MItemMaster.UOMDefault = MUOM.UOMNo inner join MItemGroup on MItemGroup.ItemGroupNo=MItemMaster.FkCategoryNo  LEFT OUTER JOIN dbo.GetItemRateAll(NULL, NULL, NULL, NULL,null) AS MRateSetting  ON  MItemMaster.ItemNo = MRateSetting.ItemNo AND MItemMaster.UOMDefault = MRateSetting.UOMNo WHERE     (MItemMaster.ItemNo <> 1) AND (MItemMaster.IsActive = ''true'') AND (MItemMaster.GroupNo =@Param1@) AND (MItemMaster.FkDepartmentNo = @Param2@)  ORDER BY MItemMaster.ItemName', 2, N'GroupNo', N'GroupNo1', N'SELECT MLedger.LedgerNo, MLedger.LedgerName AS LedgerName FROM MLedger WHERE (MLedger.GroupNo IN (@GroupNo)) AND (MLedger.IsActive = ''true'') ORDER BY LedgerName', CAST(1 AS Numeric(18, 0)), NULL)
INSERT [dbo].[MItemNameDisplayType] ([ItemNameTypeNo], [ItemNameType], [Query1], [Query2], [Query3], [StartIndex], [Param1Value], [Param2Value], [PartyQuery], [UserID], [UserDate]) VALUES (CAST(6 AS Numeric(18, 0)), N'Vehicle + Brand Name', N'Select ItemGroupNo,ItemGroupName From MItemGroup Where  ItemGroupNo in (select  groupno from mitemmaster where itemno in (select itemno from MItemTaxInfo where FromDate<=''@FromDate'' )and esflag=''false''  AND MItemMaster.CompanyNo=@CompNo@) and IsActive=''true'' order by ItemGroupName', N'Select ItemGroupNo,ItemGroupName from MItemGroup where ItemGroupNo in (select Distinct FkDepartmentNo from mitemmaster WHERE mitemmaster.IsActive=''true'' and groupno=@Param2@) order by ItemGroupName', N'SELECT MItemMaster.ItemNo,MItemGroup.ItemGroupName + '' - '' +MItemMaster.ItemName AS ItemName, MRateSetting.@cmbRateType@ AS SaleRate, MUOM.UOMName, MRateSetting.MRP,MRateSetting.stock  AS Stock, (select uomname from mitemmaster inner join muom on MItemMaster.uoml=muom.uomno where MItemMaster.itemno=MRateSetting.itemno ) AS stkUOM, 0 AS SaleTax, 0 AS PurTax,  MItemMaster.CompanyNo, MItemMaster.Barcode,  MRateSetting.PkSrNo As RateSettingNo, MItemMaster.UOMDefault,MRateSetting.PurRate,0 As DiscPerce,MItemMaster.ShortCode ,MItemMaster.esflag ,MRateSetting.stock2  AS EsStock FROM  MItemMaster INNER JOIN MUOM ON MItemMaster.UOMDefault = MUOM.UOMNo inner join MItemGroup on MItemGroup.ItemGroupNo=MItemMaster.FkCategoryNo  LEFT OUTER JOIN dbo.GetItemRateAll(NULL, NULL, NULL, NULL,null) AS MRateSetting  ON  MItemMaster.ItemNo = MRateSetting.ItemNo AND MItemMaster.UOMDefault = MRateSetting.UOMNo WHERE     (MItemMaster.ItemNo <> 1) AND (MItemMaster.IsActive = ''true'') AND (MItemMaster.GroupNo =@Param2@) AND (MItemMaster.FkDepartmentNo = @Param1@)  ORDER BY MItemMaster.ItemName', 2, N'GroupNo', N'GroupNo1', N'SELECT MLedger.LedgerNo, MLedger.LedgerName AS LedgerName FROM MLedger WHERE (MLedger.GroupNo IN (@GroupNo)) AND (MLedger.IsActive = ''true'') ORDER BY LedgerName', CAST(1 AS Numeric(18, 0)), NULL)
INSERT [dbo].[MItemNameDisplayType] ([ItemNameTypeNo], [ItemNameType], [Query1], [Query2], [Query3], [StartIndex], [Param1Value], [Param2Value], [PartyQuery], [UserID], [UserDate]) VALUES (CAST(7 AS Numeric(18, 0)), N'Product + Vehicle', N'Select ItemGroupNo,ItemGroupName From MItemGroup Where ItemGroupNo in (select Distinct FkCategoryNo from mitemmaster WHERE mitemmaster.ItemNo<>1  AND mitemmaster.CompanyNo=@CompNo@) order by ItemGroupName', N'Select ItemGroupNo,ItemGroupName from MItemGroup  where ItemGroupNo in (select Distinct GroupNo from MItemMaster  where FkCategoryNo=@Param2@ AND MItemMaster.CompanyNo=@CompNo@)  and IsActive=''true'' order by ItemGroupName', N'SELECT MItemMaster.ItemNo,MItemGroup.ItemGroupName + '' - '' +MItemMaster.ItemName AS ItemName, MRateSetting.@cmbRateType@ AS SaleRate, MUOM.UOMName, MRateSetting.MRP,MRateSetting.stock  AS Stock, (select uomname from mitemmaster inner join muom on MItemMaster.uoml=muom.uomno where MItemMaster.itemno=MRateSetting.itemno ) AS stkUOM, 0 AS SaleTax, 0 AS PurTax,  MItemMaster.CompanyNo, MItemMaster.Barcode,  MRateSetting.PkSrNo As RateSettingNo, MItemMaster.UOMDefault,MRateSetting.PurRate,0 As DiscPerce,MItemMaster.ShortCode ,MItemMaster.esflag ,MRateSetting.stock2  AS EsStock FROM  MItemMaster INNER JOIN MUOM ON MItemMaster.UOMDefault = MUOM.UOMNo inner join MItemGroup on MItemGroup.ItemGroupNo=MItemMaster.FkDepartmentNo  LEFT OUTER JOIN dbo.GetItemRateAll(NULL, NULL, NULL, NULL,null) AS MRateSetting  ON  MItemMaster.ItemNo = MRateSetting.ItemNo AND MItemMaster.UOMDefault = MRateSetting.UOMNo WHERE     (MItemMaster.ItemNo <> 1) AND (MItemMaster.IsActive = ''true'') AND (MItemMaster.GroupNo =@Param1@) AND (MItemMaster.FkCategoryNo = @Param2@)  ORDER BY MItemMaster.ItemName', 1, N'GroupNo', N'GroupNo1', N'SELECT MLedger.LedgerNo, MLedger.LedgerName AS LedgerName FROM MLedger WHERE (MLedger.GroupNo IN (@GroupNo)) AND (MLedger.IsActive = ''true'') ORDER BY LedgerName', CAST(1 AS Numeric(18, 0)), NULL)
INSERT [dbo].[MItemNameDisplayType] ([ItemNameTypeNo], [ItemNameType], [Query1], [Query2], [Query3], [StartIndex], [Param1Value], [Param2Value], [PartyQuery], [UserID], [UserDate]) VALUES (CAST(8 AS Numeric(18, 0)), N'Vehicle + Product', N'Select ItemGroupNo,ItemGroupName From MItemGroup Where  ItemGroupNo in (select  groupno from mitemmaster where itemno in (select itemno from MItemTaxInfo where FromDate<=''@FromDate'' )and esflag=''false''  AND MItemMaster.CompanyNo=@CompNo@) and IsActive=''true'' order by ItemGroupName', N'Select ItemGroupNo,ItemGroupName from MItemGroup where ItemGroupNo in (select Distinct FkCategoryNo from mitemmaster WHERE mitemmaster.IsActive=''true'' and Groupno=@Param2@) order by ItemGroupName', N'SELECT MItemMaster.ItemNo,MItemGroup.ItemGroupName + '' - '' +MItemMaster.ItemName AS ItemName, MRateSetting.@cmbRateType@ AS SaleRate, MUOM.UOMName, MRateSetting.MRP,MRateSetting.stock  AS Stock, (select uomname from mitemmaster inner join muom on MItemMaster.uoml=muom.uomno where MItemMaster.itemno=MRateSetting.itemno ) AS stkUOM, 0 AS SaleTax, 0 AS PurTax,  MItemMaster.CompanyNo, MItemMaster.Barcode,  MRateSetting.PkSrNo As RateSettingNo, MItemMaster.UOMDefault,MRateSetting.PurRate,0 As DiscPerce,MItemMaster.ShortCode ,MItemMaster.esflag ,MRateSetting.stock2  AS EsStock FROM  MItemMaster INNER JOIN MUOM ON MItemMaster.UOMDefault = MUOM.UOMNo inner join MItemGroup on MItemGroup.ItemGroupNo=MItemMaster.FkDepartmentNo  LEFT OUTER JOIN dbo.GetItemRateAll(NULL, NULL, NULL, NULL,null) AS MRateSetting  ON  MItemMaster.ItemNo = MRateSetting.ItemNo AND MItemMaster.UOMDefault = MRateSetting.UOMNo WHERE     (MItemMaster.ItemNo <> 1) AND (MItemMaster.IsActive = ''true'') AND (MItemMaster.GroupNo =@Param2@) AND (MItemMaster.FkCategoryNo = @Param1@)  ORDER BY MItemMaster.ItemName', 1, N'GroupNo', N'GroupNo1', N'SELECT MLedger.LedgerNo, MLedger.LedgerName AS LedgerName FROM MLedger WHERE (MLedger.GroupNo IN (@GroupNo)) AND (MLedger.IsActive = ''true'') ORDER BY LedgerName', CAST(1 AS Numeric(18, 0)), NULL)
SET IDENTITY_INSERT [dbo].[MItemNameDisplayType] OFF
